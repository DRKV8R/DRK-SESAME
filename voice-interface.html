<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Sesame Voice Studio - Dark</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background:#000000;
  color:#ffffff;
  min-height:100vh;
  padding:20px;
}
.container{
  max-width:1400px;
  margin:0 auto;
  background:#111111;
  border:1px solid #333333;
  border-radius:16px;
  padding:2.5rem;
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
}
.header{
  text-align:center;
  margin-bottom:3rem;
  padding-bottom:2rem;
  border-bottom:1px solid #333333;
}
.header h1{
  background:linear-gradient(45deg,#ffffff,#cccccc);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  font-size:3rem;
  font-weight:800;
  margin-bottom:1rem;
}
.header p{
  color:#cccccc;
  font-size:1.3rem;
  line-height:1.6;
}
.workflow{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(350px,1fr));
  gap:2rem;
  margin-bottom:3rem;
}
.step-card{
  background:#1a1a1a;
  border:1px solid #333333;
  border-radius:12px;
  padding:2rem;
  transition:all 0.3s ease;
  position:relative;
}
.step-card:hover{
  border-color:#0066cc;
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(0,102,204,0.2);
}
.step-card.active{
  border-color:#ff4444;
  box-shadow:0 8px 25px rgba(255,68,68,0.2);
}
.step-title{
  font-size:1.4rem;
  font-weight:700;
  color:#ffffff;
  margin-bottom:1.5rem;
  display:flex;
  align-items:center;
}
.step-number{
  background:linear-gradient(45deg,#0066cc,#0088ff);
  color:#ffffff;
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin-right:12px;
  font-size:1rem;
  font-weight:600;
}
.step-card.active .step-number{
  background:linear-gradient(45deg,#ff4444,#ff6666);
}
.upload-area{
  border:2px dashed #555555;
  border-radius:12px;
  padding:3rem 2rem;
  text-align:center;
  cursor:pointer;
  transition:all 0.3s ease;
  margin-bottom:1.5rem;
  background:#1e1e1e;
}
.upload-area:hover,.upload-area.dragover{
  border-color:#0066cc;
  background:#252525;
}
.upload-icon{
  font-size:3.5rem;
  color:#666666;
  margin-bottom:1rem;
  transition:all 0.3s ease;
}
.upload-area:hover .upload-icon{
  color:#0066cc;
  transform:scale(1.1);
}
.upload-text{
  color:#cccccc;
  font-size:1.2rem;
  font-weight:600;
  margin-bottom:0.5rem;
}
.upload-hint{
  color:#999999;
  font-size:0.95rem;
}
.file-input{display:none}
.audio-preview{
  background:#2a2a2a;
  border:1px solid #444444;
  border-radius:8px;
  padding:1.5rem;
  margin:1rem 0;
  display:none;
}
.audio-preview.show{
  display:block;
  animation:slideIn 0.3s ease;
}
@keyframes slideIn{
  from{opacity:0;transform:translateY(-10px)}
  to{opacity:1;transform:translateY(0)}
}
.transcription-area{
  background:#1e1e1e;
  border:1px solid #444444;
  border-radius:8px;
  padding:1.5rem;
  min-height:160px;
  font-family:'SF Mono',Monaco,monospace;
  color:#e5e5e5;
  margin:1rem 0;
  line-height:1.6;
}
.settings-panel{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:1.5rem;
  margin:1.5rem 0;
}
.setting-group{
  display:flex;
  flex-direction:column;
}
.setting-label{
  font-weight:600;
  color:#e5e5e5;
  margin-bottom:0.5rem;
  font-size:0.95rem;
}
.setting-input{
  padding:0.75rem 1rem;
  border:1px solid #444444;
  border-radius:6px;
  font-size:1rem;
  background:#1e1e1e;
  color:#ffffff;
  transition:all 0.3s ease;
}
.setting-input:focus{
  outline:none;
  border-color:#0066cc;
  box-shadow:0 0 0 2px rgba(0,102,204,0.2);
}
.btn{
  background:linear-gradient(45deg,#0066cc,#0088ff);
  color:#ffffff;
  border:none;
  padding:0.75rem 1.5rem;
  border-radius:6px;
  font-size:1rem;
  font-weight:600;
  cursor:pointer;
  transition:all 0.3s ease;
  margin:0.5rem 0.5rem 0.5rem 0;
}
.btn:hover{
  background:linear-gradient(45deg,#0088ff,#00aaff);
  transform:translateY(-1px);
}
.btn:disabled{
  background:#444444;
  cursor:not-allowed;
  transform:none;
}
.btn-success{
  background:linear-gradient(45deg,#ff4444,#ff6666);
}
.btn-success:hover{
  background:linear-gradient(45deg,#ff6666,#ff8888);
}
.progress-bar{
  width:100%;
  height:6px;
  background:#333333;
  border-radius:3px;
  overflow:hidden;
  margin:1rem 0;
}
.progress-fill{
  height:100%;
  background:linear-gradient(90deg,#0066cc,#00aaff);
  width:0%;
  transition:width 0.3s ease;
}
.voice-library{
  margin-top:3rem;
  padding-top:2rem;
  border-top:1px solid #333333;
}
.voice-library h2{
  color:#ffffff;
  font-size:1.8rem;
  margin-bottom:1.5rem;
}
.voice-card{
  background:#1a1a1a;
  border:1px solid #333333;
  border-radius:8px;
  padding:1.5rem;
  margin:1rem 0;
  display:flex;
  justify-content:space-between;
  align-items:center;
  transition:all 0.3s ease;
}
.voice-card:hover{
  border-color:#0066cc;
  transform:translateY(-1px);
}
.voice-info h3{
  color:#ffffff;
  margin-bottom:0.5rem;
}
.voice-info p{
  color:#cccccc;
  font-size:0.9rem;
}
.voice-actions{
  display:flex;
  gap:0.75rem;
}
.status{
  padding:1rem 1.5rem;
  border-radius:8px;
  margin:1rem 0;
  display:none;
  font-weight:500;
}
.status.show{display:block;animation:slideIn 0.3s ease}
.status.success{
  background:#1a3d1a;
  color:#66ff66;
  border:1px solid #2d5a2d;
}
.status.error{
  background:#3d1a1a;
  color:#ff6666;
  border:1px solid #5a2d2d;
}
.status.info{
  background:#1a1a3d;
  color:#6666ff;
  border:1px solid #2d2d5a;
}

/* API Integration Demo Section */
.api-demo{
  background:#1a1a1a;
  border:1px solid #333333;
  border-radius:12px;
  padding:2rem;
  margin:2rem 0;
}
.api-demo h3{
  color:#ffffff;
  margin-bottom:1rem;
  display:flex;
  align-items:center;
}
.api-icon{
  background:#ff4444;
  color:#ffffff;
  width:32px;
  height:32px;
  border-radius:6px;
  display:flex;
  align-items:center;
  justify-content:center;
  margin-right:10px;
  font-size:1rem;
}
.code-block{
  background:#0d1117;
  border:1px solid #30363d;
  border-radius:6px;
  padding:1rem;
  margin:1rem 0;
  font-family:'SF Mono',Monaco,monospace;
  font-size:0.9rem;
  color:#e6edf3;
  overflow-x:auto;
}
.code-block .comment{color:#7d8590}
.code-block .string{color:#a5d6ff}
.code-block .keyword{color:#ff7b72}
.code-block .function{color:#d2a8ff}

@media(max-width:768px){
  .container{padding:1.5rem;margin:1rem}
  .workflow{grid-template-columns:1fr}
  .settings-panel{grid-template-columns:1fr}
  .voice-card{flex-direction:column;align-items:flex-start;gap:1rem}
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>üéôÔ∏è Sesame Voice Studio</h1>
    <p>Professional voice cloning dashboard with API integration examples for your portfolio at <strong>v0-minimalist-portfolio-fawn.vercel.app</strong></p>
  </div>
  
  <!-- API Integration Demo -->
  <div class="api-demo">
    <h3>
      <span class="api-icon">üîå</span>
      Portfolio Integration Example
    </h3>
    <p style="color:#cccccc;margin-bottom:1rem;">
      Here's how to integrate this voice API with your Vercel portfolio:
    </p>
    
    <div class="code-block">
<span class="comment">// Add to your portfolio's JavaScript</span>
<span class="keyword">async function</span> <span class="function">generateSpeech</span>(text) {
  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="function">fetch</span>(<span class="string">`https://api.runpod.ai/v2/${ENDPOINT_ID}/runsync`</span>, {
    method: <span class="string">'POST'</span>,
    headers: {
      <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,
      <span class="string">'Authorization'</span>: <span class="string">`Bearer ${API_KEY}`</span>
    },
    body: JSON.<span class="function">stringify</span>({
      input: { 
        text, 
        speaker_id: 0, 
        max_length_ms: 10000 
      }
    })
  });
  
  <span class="keyword">const</span> result = <span class="keyword">await</span> response.<span class="function">json</span>();
  <span class="keyword">if</span> (result.output?.audio_base64) {
    <span class="keyword">const</span> audio = <span class="keyword">new</span> <span class="function">Audio</span>(<span class="string">`data:audio/wav;base64,${result.output.audio_base64}`</span>);
    audio.<span class="function">play</span>();
  }
}

<span class="comment">// Example: Add voice to your resume section</span>
document.<span class="function">getElementById</span>(<span class="string">'speak-bio'</span>).<span class="function">addEventListener</span>(<span class="string">'click'</span>, () => {
  <span class="function">generateSpeech</span>(<span class="string">'Hello, I am a software engineer from Huntington Beach, California.'</span>);
});
    </div>
    
    <div class="settings-panel">
      <div class="setting-group">
        <label class="setting-label">RunPod Endpoint ID</label>
        <input type="text" class="setting-input" id="endpointInput" placeholder="abc123-def456">
      </div>
      <div class="setting-group">
        <label class="setting-label">RunPod API Key</label>
        <input type="password" class="setting-input" id="apiKeyInput" placeholder="Your API key">
      </div>
    </div>
    
    <button class="btn btn-success" onclick="testConnection()">üß™ Test API Connection</button>
  </div>

  <div class="workflow">
    <!-- Step 1: Upload -->
    <div class="step-card active" id="step-upload">
      <div class="step-title">
        <span class="step-number">1</span>
        Upload Audio
      </div>
      
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">üéµ</div>
        <div class="upload-text">Drop audio files here or click to browse</div>
        <div class="upload-hint">Supports MP3, WAV, M4A ‚Ä¢ Max 10MB ‚Ä¢ Min 30 seconds</div>
      </div>
      
      <input type="file" id="audioFile" class="file-input" accept="audio/*">
      
      <div class="audio-preview" id="audioPreview">
        <audio controls style="width:100%;margin-bottom:10px;"></audio>
        <div id="audioInfo"></div>
      </div>
      
      <button class="btn" id="transcribeBtn" disabled>üî§ Transcribe Audio</button>
    </div>
    
    <!-- Step 2: Transcribe -->
    <div class="step-card" id="step-transcribe">
      <div class="step-title">
        <span class="step-number">2</span>
        Review Transcription
      </div>
      
      <div class="transcription-area" id="transcriptionText">
        Audio transcription will appear here automatically...
      </div>
      
      <div class="settings-panel">
        <div class="setting-group">
          <label class="setting-label">Language</label>
          <select class="setting-input" id="languageSelect">
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="auto">Auto-detect</option>
          </select>
        </div>
        <div class="setting-group">
          <label class="setting-label">Quality</label>
          <select class="setting-input" id="qualitySelect">
            <option value="high">High Quality</option>
            <option value="medium" selected>Medium Quality</option>
            <option value="fast">Fast Processing</option>
          </select>
        </div>
      </div>
      
      <button class="btn" id="editTranscriptionBtn">‚úèÔ∏è Edit</button>
      <button class="btn btn-success" id="approveTranscriptionBtn" disabled>‚úÖ Approve</button>
    </div>
    
    <!-- Step 3: Configure -->
    <div class="step-card" id="step-configure">
      <div class="step-title">
        <span class="step-number">3</span>
        Voice Settings
      </div>
      
      <div class="settings-panel">
        <div class="setting-group">
          <label class="setting-label">Voice Name</label>
          <input type="text" class="setting-input" id="voiceName" placeholder="My Custom Voice">
        </div>
        <div class="setting-group">
          <label class="setting-label">Speaker ID</label>
          <input type="number" class="setting-input" id="speakerId" value="1" min="1" max="10">
        </div>
        <div class="setting-group">
          <label class="setting-label">Max Length (ms)</label>
          <input type="number" class="setting-input" id="maxLength" value="10000" min="1000" max="30000">
        </div>
      </div>
      
      <button class="btn" id="testVoiceBtn" disabled>üîä Test Voice</button>
      <button class="btn btn-success" id="saveVoiceBtn" disabled>üíæ Save Profile</button>
    </div>
  </div>
  
  <div class="status" id="statusMessage"></div>
  
  <div class="voice-library">
    <h2>üìö Your Voice Library</h2>
    <div id="voiceLibrary">
      <p style="color:#666;text-align:center;">No voice profiles saved yet.</p>
    </div>
  </div>
</div>

<script>
// Dark mode voice interface with persistent settings
class VoiceCloningInterface {
  constructor() {
    this.config = {
      runpodEndpoint: localStorage.getItem('runpod_endpoint') || '',
      runpodApiKey: localStorage.getItem('runpod_api_key') || '',
      modelRepo: 'BiggestLab/csm-1b',
      defaultSpeakerId: 0,
      maxLengthMs: 10000
    };
    
    this.audioFile = null;
    this.transcription = '';
    this.voiceProfiles = JSON.parse(localStorage.getItem('voiceProfiles') || '[]');
    
    this.initializeEventListeners();
    this.loadSettings();
    this.renderVoiceLibrary();
  }
  
  initializeEventListeners() {
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('audioFile');
    
    uploadArea.addEventListener('click', () => fileInput.click());
    uploadArea.addEventListener('dragover', this.handleDragOver.bind(this));
    uploadArea.addEventListener('drop', this.handleDrop.bind(this));
    fileInput.addEventListener('change', this.handleFileSelect.bind(this));
    
    document.getElementById('transcribeBtn').addEventListener('click', this.transcribeAudio.bind(this));
    document.getElementById('testVoiceBtn').addEventListener('click', this.testVoice.bind(this));
    document.getElementById('saveVoiceBtn').addEventListener('click', this.saveVoiceProfile.bind(this));
  }
  
  loadSettings() {
    document.getElementById('endpointInput').value = this.config.runpodEndpoint;
    document.getElementById('apiKeyInput').value = this.config.runpodApiKey;
  }
  
  handleDragOver(e) {
    e.preventDefault();
    e.currentTarget.classList.add('dragover');
  }
  
  handleDrop(e) {
    e.preventDefault();
    e.currentTarget.classList.remove('dragover');
    this.processFiles(e.dataTransfer.files);
  }
  
  handleFileSelect(e) {
    this.processFiles(e.target.files);
  }
  
  processFiles(files) {
    if (files.length === 0) return;
    
    const file = files[0];
    if (!file.type.startsWith('audio/')) {
      this.showStatus('Please select a valid audio file.', 'error');
      return;
    }
    
    this.audioFile = file;
    this.displayAudioPreview(file);
    document.getElementById('transcribeBtn').disabled = false;
  }
  
  displayAudioPreview(file) {
    const preview = document.getElementById('audioPreview');
    const audio = preview.querySelector('audio');
    const info = document.getElementById('audioInfo');
    
    const url = URL.createObjectURL(file);
    audio.src = url;
    
    info.innerHTML = `
      <strong style="color:#fff">${file.name}</strong><br>
      <span style="color:#ccc">Size: ${(file.size / 1024 / 1024).toFixed(2)} MB | Type: ${file.type}</span>
    `;
    
    preview.classList.add('show');
  }
  
  async transcribeAudio() {
    this.showStatus('Transcribing audio...', 'info');
    this.activateStep(2);
    
    // Mock transcription - replace with actual API
    setTimeout(() => {
      this.transcription = "Hello, this is a sample transcription of the uploaded audio file. The quality of voice cloning depends on clear, high-quality audio recordings.";
      document.getElementById('transcriptionText').textContent = this.transcription;
      document.getElementById('approveTranscriptionBtn').disabled = false;
      this.showStatus('Transcription completed successfully!', 'success');
    }, 2000);
  }
  
  async testVoice() {
    const endpoint = document.getElementById('endpointInput').value;
    const apiKey = document.getElementById('apiKeyInput').value;
    
    if (!endpoint || !apiKey) {
      this.showStatus('Please enter RunPod endpoint and API key first.', 'error');
      return;
    }
    
    // Save credentials
    localStorage.setItem('runpod_endpoint', endpoint);
    localStorage.setItem('runpod_api_key', apiKey);
    
    this.showStatus('Generating test audio...', 'info');
    
    try {
      const response = await fetch(`https://api.runpod.ai/v2/${endpoint}/runsync`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          input: {
            text: "This is a test of your voice clone from Huntington Beach!",
            speaker_id: parseInt(document.getElementById('speakerId').value),
            max_length_ms: 8000
          }
        })
      });
      
      const result = await response.json();
      
      if (result.output?.audio_base64) {
        const audio = new Audio('data:audio/wav;base64,' + result.output.audio_base64);
        audio.play();
        this.showStatus('Test audio generated successfully!', 'success');
      } else {
        this.showStatus('API Error: ' + JSON.stringify(result), 'error');
      }
    } catch (error) {
      this.showStatus(`Test failed: ${error.message}`, 'error');
    }
  }
  
  saveVoiceProfile() {
    const profile = {
      id: Date.now(),
      name: document.getElementById('voiceName').value || 'Unnamed Voice',
      speakerId: document.getElementById('speakerId').value,
      maxLength: document.getElementById('maxLength').value,
      transcription: this.transcription,
      created: new Date().toLocaleDateString()
    };
    
    this.voiceProfiles.push(profile);
    localStorage.setItem('voiceProfiles', JSON.stringify(this.voiceProfiles));
    this.renderVoiceLibrary();
    this.showStatus('Voice profile saved successfully!', 'success');
  }
  
  activateStep(stepNumber) {
    document.querySelectorAll('.step-card').forEach(card => card.classList.remove('active'));
    const steps = ['upload', 'transcribe', 'configure'];
    document.getElementById(`step-${steps[stepNumber-1]}`).classList.add('active');
  }
  
  showStatus(message, type = 'info') {
    const status = document.getElementById('statusMessage');
    status.textContent = message;
    status.className = `status ${type} show`;
    setTimeout(() => status.classList.remove('show'), 5000);
  }
  
  renderVoiceLibrary() {
    const library = document.getElementById('voiceLibrary');
    
    if (this.voiceProfiles.length === 0) {
      library.innerHTML = '<p style="color:#666;text-align:center;">No voice profiles saved yet.</p>';
      return;
    }
    
    library.innerHTML = this.voiceProfiles.map(profile => `
      <div class="voice-card">
        <div class="voice-info">
          <h3>${profile.name}</h3>
          <p>Speaker ID: ${profile.speakerId} ‚Ä¢ Created: ${profile.created}</p>
        </div>
        <div class="voice-actions">
          <button class="btn" onclick="voiceInterface.useVoice(${profile.id})">Use</button>
          <button class="btn" onclick="voiceInterface.deleteVoice(${profile.id})">Delete</button>
        </div>
      </div>
    `).join('');
  }
  
  useVoice(profileId) {
    const profile = this.voiceProfiles.find(p => p.id === profileId);
    if (!profile) return;
    
    document.getElementById('voiceName').value = profile.name;
    document.getElementById('speakerId').value = profile.speakerId;
    document.getElementById('maxLength').value = profile.maxLength;
    this.transcription = profile.transcription;
    document.getElementById('transcriptionText').textContent = profile.transcription;
    
    this.activateStep(3);
    this.showStatus(`Loaded voice profile: ${profile.name}`, 'success');
  }
  
  deleteVoice(profileId) {
    if (confirm('Delete this voice profile?')) {
      this.voiceProfiles = this.voiceProfiles.filter(p => p.id !== profileId);
      localStorage.setItem('voiceProfiles', JSON.stringify(this.voiceProfiles));
      this.renderVoiceLibrary();
      this.showStatus('Voice profile deleted.', 'info');
    }
  }
}

// Test API connection function
function testConnection() {
  const endpoint = document.getElementById('endpointInput').value;
  const apiKey = document.getElementById('apiKeyInput').value;
  
  if (!endpoint || !apiKey) {
    alert('Please enter both endpoint ID and API key.');
    return;
  }
  
  voiceInterface.showStatus('Testing API connection...', 'info');
  
  fetch(`https://api.runpod.ai/v2/${endpoint}/runsync`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${apiKey}`
    },
    body: JSON.stringify({
      input: {
        text: "API connection test from your dark mode dashboard!",
        speaker_id: 0,
        max_length_ms: 5000
      }
    })
  })
  .then(response => response.json())
  .then(result => {
    if (result.output?.audio_base64) {
      const audio = new Audio('data:audio/wav;base64,' + result.output.audio_base64);
      audio.play();
      voiceInterface.showStatus('‚úÖ API connection successful!', 'success');
    } else {
      voiceInterface.showStatus('‚ùå API Error: ' + JSON.stringify(result), 'error');
    }
  })
  .catch(error => {
    voiceInterface.showStatus('‚ùå Connection failed: ' + error.message, 'error');
  });
}

// Initialize the interface
const voiceInterface = new VoiceCloningInterface();
</script>
</body>
</html>
